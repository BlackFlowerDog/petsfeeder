# petsfeeder
Простой web-интерфейс системы умных кормушек для кошек и собак.
## Небольшое описание, что это
Проект является учебным. Для серверной части была использована связка Python + Flask во избежание постоянной загрузки файлов на плату и замедления редактирования.  Может быть использован в разработке реальной системы умных кормушек. Предполагаемая плата для использования - ESP-32. ***Текущая серверная часть не предназначена для загрузки на плату, а служит лишь для более удобной отладки.***

Краткий список функций:

1. Кнопка ручного наполнения миски
2. Отображение данных с датчиков уровня корма
3. Хранение данных о питомцах
4. Настройка расписания кормления
5. Отобрабражение времени до следующего кормления
## Подробное описание функционала, скриншоты страниц
### Pages
Страниц всего четыре: одна с основной информацией, две для редактирования расписаний и списка питомцев и еще одна, оставленная мной по историческим причинам.
В хедере каждой страницы расположено меню.

![Image alt](https://github.com/BlackFlowerDog/laughing-bassoon/raw/main/menu.png)

#### MAIN

Данные о питомцах отображены в карточках-таблицах.

Имя

Тип (кошка/собака)

Пол (male, female)

Дата рождения (если была указана)

Возраст (высчитывается на странице на основе даты рождения и текущей даты в системе)

Активирована/неактивирована функция кормления по времени

Под основной информацией находится загружаемая фотография питомца. Если фотографию не указывать, будут использованы default-cat или default-dog - в зависимости от указанного типа животного. Для переключения между питомцами нужно использовать стрелки, расположенные по обе сторны от карточки. Крест в левом верхнем углу удаляет текущего питомца (возможно только на странице add pet).

![pet card](https://github.com/BlackFlowerDog/laughing-bassoon/raw/main/pet_card.png)

При наведении курсора мыши на черную иконку расписания справа снизу выпадет используемое время кормления, но только при условии, что кормление по времени активировано. Даже если у питомца будет хранится расписание, оно не будет здесь отображено.

![Image alt](https://github.com/BlackFlowerDog/laughing-bassoon/raw/main/time_PC.png)

Если никаких сохраненных питмцев еще нет в системе, то будет отображен шаблон.

![Image alt](https://github.com/BlackFlowerDog/laughing-bassoon/raw/main/image.png)

Справа находится измеритель, отображающий данные с датчиков измерения уровня корма в миске. Во время указания стрелки в красный сектор его цвет становится более насыщенным.
Под измерителем - таймер, отсчитывающий время до следующего кормления (работает, если расписание активировано). 
Под таймером кнопка ручного наполения миски. 

![Image alt](https://github.com/BlackFlowerDog/laughing-bassoon/raw/main/foodlvl.png)

#### ADD PETS

Слева расположен блок с уже существующими питомцами. Справа от него форма для ввода данных о новом питомце. Обязательные поля: имя, пол и тип (кошка/собака) животного. Имя можеть иметь длину не более 10 символов.
Для добавления питомца необходимо нажать расположенную справа внизу иконку галки.
Так же с этой страницы доступно удаление питомца.

![Image alt](https://github.com/BlackFlowerDog/laughing-bassoon/raw/main/addPet.png)

При загрузке фотографии отобразятся ее миниатюра, размер и название.

![Image alt](https://github.com/BlackFlowerDog/laughing-bassoon/raw/main/uploads_image.png)

Если не загружать свою фотографию на сервер, то в качесте фотографии питомца будут использованы дефолтные кошка и собака.

![Image alt](https://github.com/BlackFlowerDog/petsfeeder/raw/main/static/images/default-cat.jpg)

![Image alt](https://github.com/BlackFlowerDog/petsfeeder/raw/main/static/images/default-dog.jpg)

#### EDIT SCHEDULES

Слева карточка питомца, расписание которого отображается. При переключении между питомцами с помощью стрелок, соответственно будет меняться расписание. Оно отображается вне зависимости от того, активирована ли функция кормления по установленному времени или нет.

![Image alt](https://github.com/BlackFlowerDog/laughing-bassoon/raw/main/schedule_editor.png)

Можно:
- Активировать или деактивировать кормление по времени. При деактивации используемое раписание сохраняется;
- Полностью сбросить расписание;
- Удалить конкретное время из расписания (крест напротив записи в таблице);
- Добавить новое время кормления в расписание.

Если у питомца нет сохраненного времени, будет выведен шаблон.

![Image ](https://github.com/BlackFlowerDog/laughing-bassoon/raw/main/image.png)


#### ABOUT US

Можно использовать для заполнения инфомарции о команде создателей.

![Image alt](https://github.com/BlackFlowerDog/laughing-bassoon/raw/main/about_us.png)

### config.json

Все данные о животных хранит файл config.json, используемый как аналог базы данных. 
Пример записи об одном питомце.

```
{"Cocca": {"type": true, "photoName": "Cocca201c72b1-aa26-4a61-a765-ded2347e65c3.jpg", "birthday": "", "sex": true, "schedule": {"activate": false, "time": ["12:12"]}}}
```

Все питомцы хранятся как записи в словаре. Ключом является имя животного, соответственно добавление нескольких питомцев с одинаковыми именами невозможно.
Type - cat (true), dog (false). Sex - male (true), female (false).
К началу названия загруженной фотографии добавляется имя питомца для создания уникального названия для фотографии во избежание ошибочного удаления из файловой системы при загрузке одинаковых фотографий для нескольких питомцев пользователем.
Activate - отвечает за активацию расписания кормления. Time - массив со временем кормления, отсортированным по возрастанию.

### Формат данных с сервера

